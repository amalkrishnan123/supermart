{% extends "navbar.html" %}
{% block content %}

<div class="container mt-5 d-flex justify-content-center">
    <div class="card p-4 shadow" style="width: 450px;">

        <h4 class="text-center mb-3 text-primary">Confirm User Details</h4>
        <p class="text-center text-muted mb-4">
            Please verify your details before placing the order
        </p>

        <!-- USERNAME -->
        <div class="mb-3">
            <label class="fw-bold text-primary">Username</label>
            <input type="text" class="form-control bg-light"
                   value="{{ details.user.username }}" readonly>
        </div>

        <!-- EMAIL -->
        <div class="mb-3">
            <label class="fw-bold text-primary">Email</label>
            <input type="text" class="form-control bg-light"
                   value="{{ details.user.email }}" readonly>
        </div>

        <!-- MOBILE -->
        <div class="mb-3">
            <label class="fw-bold text-primary">Mobile</label>
            <input type="text" class="form-control bg-light"
                   value="{{ details.mobile }}" readonly>
        </div>

        <hr>

        <!-- ADDRESS HEADER + ADD BUTTON -->
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="text-primary mb-0">Address Details</h5>

            
            <a href="{% url 'edit_address' %}"
               class="btn btn-sm btn-outline-primary">
                Add/Edit Address
            </a>
            
        </div>

        {% if details.address %}
        <!-- ADDRESS -->
        <div class="mb-3">
            <label class="fw-bold text-primary">Address</label>
            <input type="text" class="form-control bg-light"
                   value="{{ details.address.address }}" readonly>
        </div>

        <!-- PINCODE -->
        <div class="mb-3">
            <label class="fw-bold text-primary">Pincode</label>
            <input type="text" class="form-control bg-light"
                   value="{{ details.address.pincode }}" readonly>
        </div>

        <!-- DISTRICT -->
        <div class="mb-3">
            <label class="fw-bold text-primary">District</label>
            <input type="text" class="form-control bg-light"
                   value="{{ details.address.district }}" readonly>
        </div>

        <!-- STATE -->
        <div class="mb-3">
            <label class="fw-bold text-primary">State</label>
            <input type="text" class="form-control bg-light"
                   value="{{ details.address.state }}" readonly>
        </div>

        {% else %}
        <p class="text-danger text-center mb-3">
            Address not found. Please add an address before checkout.
        </p>
        {% endif %}

        <!-- PLACE ORDER -->
        <form method="post" action="{% url 'place_order' %}">
            {% csrf_token %}

            {% if details.address %}
                <button type="submit"
                        class="btn btn-primary w-100 fw-bold">
                    Place Order
                </button>
            {% else %}
                <button type="button"
                        class="btn btn-secondary w-100 fw-bold"
                        disabled>
                    Add address to place order
                </button>
            {% endif %}
        </form>

    </div>
</div>

{% endblock content %}
